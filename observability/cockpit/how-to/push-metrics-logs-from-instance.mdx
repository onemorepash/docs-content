---
meta:
  title: How to push metrics and logs from a Scaleway Instance
  description: This page shows you how to push metrics and logs from a Scaleway Instance
content:
  h1: How to push metrics and logs from a Scaleway Instance
  paragraph: This page shows you how to push metrics and logs from a Scaleway Instance
tags: cockpit observability metrics logs instance
categories:
  - observability
dates:
  validation: 2023-06-15
  posted: 2023-06-15
---

This page shows you how to push your metrics and logs from a Scaleway Instance.

<Macro id="iam-requirements" />
 
<Message type="requirement">
 - You have an account and are logged into the [Scaleway console](https://console.scaleway.com)
 - You have activated your [Cockpit](/observability/cockpit/how-to/activate-cockpit)
</Message>

<Message type="important">
 - Having the default configuration on your agents might lead to more of your resourcesâ€™ metrics being sent, a high consumption and a high bill at the end of the month.
 - Sending metrics and logs for Scaleway resources or personal data using an external path is a billable feature. In addition, any data that you push yourself is billed, even if you send data from Scaleway products. Refer to the product pricing for more information.
</Message>

## Configure your environment

1. Type the following command to clone our workshop repository on your local machine:

            ```bash
            git clone git@gitlab.infra.online.net:observability-paas/workshop.git
            ```
2. [Create an Instance](/compute/instances/how-to/create-an-instance) from the **Compute** section of the Scaleway console.
3. Copy your Instance's public IP.
4. Open a terminal and send the `workshop` folder into your Instance:

            ```bash
            scp -r workshop root@<your Instance public IP>:~/
            ```
5. Open another terminal and type the following command to connect to your Instance:

            ```bash
            ssh root@<your Instance public IP>
            ```

6. Make sure the `workshop` folder is inside your Instance with the following command:

            ```bash
            ls
            ```
7. Access the `workshop` folder using the following command:

            ```bash
            cd wokshop
            ```
8. Install [Golang](https://go.dev/) on your Instance using the following commands:

            ```bash
            wget https://dl.google.com/go/go1.13.5.linux-amd64.tar.gz
            sudo tar -C /usr/local/ -xzf go1.13.5.linux-amd64.tar.gz
            ```
9. Run the following command to set up your environment:

            ```bash
            export PATH=$PATH:/usr/local/go/bin
            ```
10. Run the following command to install docker. Docker allows you to run the `docker-compose.yaml` file.

            ```bash
            apt install docker.io
            ```
11. Run the following command to unzip the zipped files from the workshop folder:

        ```bash
        sudo apt-get install zip unzip
        ```

## Push your metrics and logs

1. [Generate a token](/observability/cockpit/how-to/create-token/) and select the push permissions for metrics and logs. Make sure you note down your token's secret key as you will need it in the following steps.
2.  Run the following command to download the agent:
        ```bash
        ./download.sh
        ```
3. Open a terminal and run `vim agent.yaml` to access the Grafana agent configuration file.
4. Type `i` to be able to write in the file and add your token's secret key next to `X-Token` in the `metrics` section.
5. Copy the following URL `https://metrics.cockpit.fr-par.scw.cloud/api/v1/push` and paste it next to `url` in the `metrics` section.
6. Type `i` to be able to write in the file and add your token's secret key next to `tenant_id` in the `logs` section.
7. Copy the following URL `https://logs.cockpit.fr-par.scw.cloud/loki/api/v1/push` and paste it next to `url` in the `logs` section.
8. Press `escape` and `:wq` to exit the file.
9. Run the Grafana agent using the following command:
        ```bash
        ./run.sh
        ```
10. Log in to Grafana.
11. Import dashboard 1860.
12. Select `5 last minutes` and your metrics should display in the dashboard.
13. Click **Explore** to make sure your logs display as well.


